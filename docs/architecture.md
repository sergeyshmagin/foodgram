# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Foodgram

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
Foodgram - –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:
- –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–æ–±–∞–≤–ª—è—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
- –ü–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∞–≤—Ç–æ—Ä–æ–≤
- –°–∫–∞—á–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Framework**: Django 3.2.16 + Django REST Framework 3.12.4
- **Database**: PostgreSQL (—á–µ—Ä–µ–∑ psycopg2-binary)
- **Authentication**: Djoser + JWT —Ç–æ–∫–µ–Ω—ã
- **Cache**: Redis (–¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—á–µ—Ä–µ–¥–µ–π)
- **Storage**: MinIO (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤)
- **WSGI**: Gunicorn
- **Testing**: pytest + pytest-django

### Frontend
- **Framework**: React.js
- **–°–±–æ—Ä–∫–∞**: Create React App

### Infrastructure
- **Containerization**: Docker + Docker Compose
- **Web Server**: Nginx (—Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ + —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã)
- **CI/CD**: GitHub Actions
- **Registry**: Docker Registry –Ω–∞ 192.168.0.4

## üåê –°–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∞—è —Å—Ä–µ–¥–∞:
- **–ü—Ä–æ–¥–∞–∫—à–µ–Ω**: 192.168.0.10
- **Docker Registry**: 192.168.0.4
- **Redis**: 192.168.0.3
- **MinIO + PostgreSQL**: 192.168.0.4

### –ü–æ—Ä—Ç—ã:
- **Frontend**: 3000 (dev), 80 (prod)
- **Backend API**: 8000 (dev), 8000 (prod)
- **PostgreSQL**: 5432
- **Redis**: 6379
- **MinIO**: 9000

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Django

### 1. `users` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å User (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ AbstractUser)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ email
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞–º–∏
- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è

### 2. `recipes` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
- –ú–æ–¥–µ–ª–∏: Recipe, Ingredient, Tag, IngredientInRecipe
- ViewSets –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 3. `favorites` - –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
- –ú–æ–¥–µ–ª—å Favorite
- API –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è

### 4. `shopping` - –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
- –ú–æ–¥–µ–ª—å ShoppingCart
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ–∫—É–ø–æ–∫

### 5. `subscriptions` - –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∞–≤—Ç–æ—Ä–æ–≤
- –ú–æ–¥–µ–ª—å Subscription
- API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

## üîê –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. **–ì–æ—Å—Ç—å** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ—Ü–µ–ø—Ç–æ–≤, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫—Ä–æ–º–µ –∞–¥–º–∏–Ω–∫–∏
3. **–ê–≤—Ç–æ—Ä** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏
4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø

### Permissions:
- `IsOwnerOrReadOnly` - –¥–ª—è —Ä–µ—Ü–µ–ø—Ç–æ–≤
- `IsAuthenticated` - –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ/–ø–æ–∫—É–ø–æ–∫/–ø–æ–¥–ø–∏—Å–æ–∫
- `AllowAny` - –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤

## üóÑÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ö–ª—é—á–µ–≤—ã–µ —Å–≤—è–∑–∏:
```
User 1:N Recipe (–∞–≤—Ç–æ—Ä)
User N:N Recipe (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ) —á–µ—Ä–µ–∑ Favorite
User N:N Recipe (–ø–æ–∫—É–ø–∫–∏) —á–µ—Ä–µ–∑ ShoppingCart
User N:N User (–ø–æ–¥–ø–∏—Å–∫–∏) —á–µ—Ä–µ–∑ Subscription
Recipe N:N Ingredient —á–µ—Ä–µ–∑ IngredientInRecipe
Recipe N:N Tag
```

## üöÄ API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã:
- `/api/auth/` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Djoser)
- `/api/users/` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏
- `/api/recipes/` - —Ä–µ—Ü–µ–ø—Ç—ã, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –ø–æ–∫—É–ø–∫–∏
- `/api/ingredients/` - –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (–ø–æ–∏—Å–∫)
- `/api/tags/` - —Ç–µ–≥–∏ (—Å–ø–∏—Å–æ–∫)

## üê≥ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

### –°–µ—Ä–≤–∏—Å—ã Docker Compose:
1. **backend** - Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. **frontend** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (build)
3. **nginx** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
4. **db** - PostgreSQL
5. **redis** - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### Volumes:
- `static_volume` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã Django
- `media_volume` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- `postgres_data` - –¥–∞–Ω–Ω—ã–µ –ë–î

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–µ—Ç—Ä–∏–∫–∏:
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã

### –õ–æ–≥–∏:
- Django –ª–æ–≥–∏ (ERROR, WARNING)
- Nginx access/error –ª–æ–≥–∏
- PostgreSQL –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```bash
# Django
SECRET_KEY=your-secret-key
DEBUG=False
ALLOWED_HOSTS=your-domain.com,192.168.0.10

# Database
POSTGRES_DB=foodgram
POSTGRES_USER=foodgram_user
POSTGRES_PASSWORD=password
DB_HOST=db
DB_PORT=5432

# Redis
REDIS_URL=redis://192.168.0.3:6379/0

# MinIO
MINIO_ACCESS_KEY=access_key
MINIO_SECRET_KEY=secret_key
MINIO_BUCKET_NAME=foodgram
```

## üîÑ CI/CD Pipeline

### –≠—Ç–∞–ø—ã:
1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - pytest, flake8, mypy
2. **–°–±–æ—Ä–∫–∞** - Docker –æ–±—Ä–∞–∑—ã backend/frontend
3. **–ü—É—à** - –≤ registry 192.168.0.4
4. **–î–µ–ø–ª–æ–π** - –Ω–∞ 192.168.0.10
5. **–ü—Ä–æ–≤–µ—Ä–∫–∏** - health checks

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ:
- Load balancer –ø–µ—Ä–µ–¥ Django
- –†–µ–ø–ª–∏–∫–∏ PostgreSQL
- Redis Cluster

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ:
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis 